<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ResumeForge | Free Professional Resume Builder</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@600;700;800;900&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#6366f1;
      --primary-dark:#4f46e5;
      --secondary:#06b6d4;
      --accent:#f59e0b;
      --dark:#0f172a;
      --light:#f8fafc;
      --gray:#64748b;
      --gray-light:#e2e8f0;

      --shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
      --shadow-lg: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);
      --shadow-xl: 0 25px 50px -12px rgba(0,0,0,0.25);

      --a4w: 210mm;
      --a4h: 297mm;
    }

    *{ margin:0; padding:0; box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      font-family: Inter, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--light);
      color: var(--dark);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* ===== NAV ===== */
    .navbar{
      position: fixed;
      top:0; left:0; right:0;
      z-index: 1000;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--gray-light);
      padding: 0 24px;
    }
    .nav-container{
      max-width: 1400px;
      margin: 0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      height: 72px;
      gap: 16px;
    }
    .logo{
      display:flex;
      align-items:center;
      gap: 12px;
      text-decoration:none;
    }
    .logo-icon{
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 10px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 10px 22px rgba(99,102,241,.22);
    }
    .logo-icon svg{ width:22px; height:22px; color:white; }
    .logo-text{
      font-family: Montserrat, sans-serif;
      font-weight: 800;
      font-size: 22px;
      color: var(--dark);
      letter-spacing: -0.02em;
    }
    .nav-links{
      display:flex;
      align-items:center;
      gap: 40px;
    }
    .nav-links a{
      font-size: 15px;
      font-weight: 600;
      color: var(--gray);
      text-decoration:none;
      transition: color .2s;
    }
    .nav-links a:hover{ color: var(--primary); }

    .btn{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 12px 28px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 800;
      text-decoration:none;
      cursor:pointer;
      transition: all .25s ease;
      border: none;
      user-select:none;
      white-space:nowrap;
    }
    .btn-primary{
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color:white;
      box-shadow: 0 4px 14px rgba(99,102,241,0.4);
    }
    .btn-primary:hover{
      transform: translateY(-2px);
      box-shadow: 0 10px 24px rgba(99,102,241,0.35);
    }
    .btn-outline{
      background: white;
      color: var(--dark);
      border: 2px solid var(--gray-light);
    }
    .btn-outline:hover{
      border-color: var(--primary);
      color: var(--primary);
      transform: translateY(-1px);
    }

    .btn-small{
      padding: 10px 14px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: 900;
    }
    .btn-danger{
      background: #fff1f2;
      color: #9f1239;
      border: 2px solid #fecdd3;
    }
    .btn-ghost{
      background: #f1f5f9;
      color: #0f172a;
      border: 2px solid #e2e8f0;
    }
    .btn-ghost:hover{ border-color: var(--primary); color: var(--primary); }

    /* ===== HERO ===== */
    .hero{
      min-height: 100vh;
      display:flex;
      align-items:center;
      padding: 120px 24px 80px;
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #f5f3ff 100%);
      position:relative;
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute;
      top:-50%;
      right:-20%;
      width: 800px;
      height: 800px;
      background: radial-gradient(circle, rgba(99,102,241,0.12) 0%, transparent 70%);
      border-radius: 50%;
    }
    .hero-container{
      max-width: 1400px;
      margin: 0 auto;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 80px;
      align-items:center;
      position:relative;
      z-index: 1;
    }
    .hero-badge{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 16px;
      background:white;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 900;
      color: var(--primary);
      box-shadow: var(--shadow);
      margin-bottom: 22px;
    }
    .hero-badge svg{ width:16px; height:16px; }
    .hero-title{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: clamp(40px, 5vw, 64px);
      line-height: 1.05;
      color: var(--dark);
      margin-bottom: 22px;
    }
    .hero-title span{
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .hero-subtitle{
      font-size: 18px;
      color: var(--gray);
      margin-bottom: 30px;
      max-width: 520px;
      font-weight: 650;
    }
    .hero-buttons{
      display:flex;
      gap: 16px;
      margin-bottom: 36px;
      flex-wrap: wrap;
    }
    .hero-stats{
      display:flex;
      gap: 40px;
      flex-wrap: wrap;
    }
    .stat{ display:flex; flex-direction:column; }
    .stat-number{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: 32px;
      color: var(--dark);
    }
    .stat-label{
      font-size: 14px;
      color: var(--gray);
      font-weight: 700;
    }

    .hero-visual{ position:relative; }
    .resume-preview{
      background:white;
      border-radius: 16px;
      padding: 32px;
      box-shadow: var(--shadow-xl);
      transform: rotate(-3deg);
      transition: transform .25s ease;
      border: 1px solid rgba(15,23,42,.08);
    }
    .resume-preview:hover{ transform: rotate(0deg) scale(1.02); }
    .preview-header{
      text-align:center;
      border-bottom: 2px solid var(--dark);
      padding-bottom: 16px;
      margin-bottom: 20px;
    }
    .preview-name{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: 24px;
      color: var(--dark);
      letter-spacing: -0.02em;
    }
    .preview-title{
      font-size: 14px;
      color: var(--gray);
      margin-top: 4px;
      font-weight: 700;
    }
    .preview-section{ margin-bottom: 16px; }
    .preview-section-title{
      font-size: 11px;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--dark);
      border-bottom: 1px solid var(--gray-light);
      padding-bottom: 4px;
      margin-bottom: 8px;
    }
    .preview-line{
      height: 8px;
      background: var(--gray-light);
      border-radius: 999px;
      margin-bottom: 6px;
    }
    .preview-line.short{ width: 60%; }

    /* ===== SECTION HEADER ===== */
    .section-header{
      text-align:center;
      max-width: 680px;
      margin: 0 auto 60px;
    }
    .section-label{
      font-size: 13px;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--primary);
      margin-bottom: 12px;
    }
    .section-title{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: clamp(32px, 4vw, 48px);
      color: var(--dark);
      margin-bottom: 16px;
      letter-spacing: -0.02em;
    }
    .section-subtitle{
      font-size: 17px;
      color: var(--gray);
      font-weight: 700;
    }

    /* ===== TEMPLATES GRID ===== */
    .templates{
      padding: 100px 24px;
      background: white;
    }
    .templates-grid{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 24px;
      max-width: 1400px;
      margin: 0 auto;
    }
    .template-card{
      background:white;
      border-radius: 18px;
      overflow:hidden;
      box-shadow: var(--shadow);
      transition: all .25s ease;
      cursor:pointer;
      border: 2px solid transparent;
    }
    .template-card:hover{
      transform: translateY(-8px);
      box-shadow: var(--shadow-xl);
      border-color: var(--primary);
    }
    .template-preview-mini{
      aspect-ratio: 3/4;
      background: #f1f5f9;
      padding: 16px;
      position:relative;
      overflow:hidden;
    }
    .mini-resume{
      background:white;
      border-radius: 10px;
      height: 100%;
      padding: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      transform: scale(0.92);
      transform-origin: top center;
    }
    .mini-header{
      text-align:center;
      border-bottom: 1px solid var(--dark);
      padding-bottom: 6px;
      margin-bottom: 8px;
    }
    .mini-name{
      font-size: 9px;
      font-weight: 900;
      color: var(--dark);
      letter-spacing: 0.08em;
    }
    .mini-line{
      height: 3px;
      background: var(--gray-light);
      border-radius: 999px;
      margin-bottom: 3px;
    }
    .mini-line.short{ width: 70%; }
    .template-info{ padding: 16px; }
    .template-name{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: 15px;
      color: var(--dark);
      margin-bottom: 4px;
    }
    .template-desc{
      font-size: 12px;
      color: var(--gray);
      margin-bottom: 12px;
      font-weight: 700;
    }

    /* new: template action row */
    .template-actions{
      display:flex;
      gap: 10px;
    }
    .template-actions button{
      flex:1;
      padding: 10px;
      border-radius: 10px;
      font-size: 12.5px;
      font-weight: 900;
      cursor:pointer;
      border: 2px solid var(--gray-light);
      background: var(--light);
      color: var(--dark);
      transition: all .2s;
    }
    .template-actions button.primary{
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border-color: transparent;
      color: #fff;
    }
    .template-actions button:hover{ transform: translateY(-1px); border-color: var(--primary); }

    /* ===== FEATURES / HOW / TESTIMONIALS / CTA / FOOTER ===== */
    .features{
      padding: 100px 24px;
      background: linear-gradient(180deg, var(--light) 0%, white 100%);
    }
    .features-grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 32px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .feature-card{
      background:white;
      border-radius: 20px;
      padding: 40px 32px;
      box-shadow: var(--shadow);
      transition: all .25s ease;
      border: 1px solid rgba(15,23,42,.06);
    }
    .feature-card:hover{
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }
    .feature-icon{
      width: 56px; height: 56px;
      background: linear-gradient(135deg, rgba(99,102,241,0.12), rgba(6,182,212,0.12));
      border-radius: 14px;
      display:flex; align-items:center; justify-content:center;
      margin-bottom: 24px;
    }
    .feature-icon svg{ width: 26px; height: 26px; color: var(--primary); }
    .feature-title{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: 20px;
      margin-bottom: 12px;
    }
    .feature-desc{
      font-size: 15px;
      color: var(--gray);
      font-weight: 700;
      line-height: 1.7;
    }

    .how-it-works{
      padding: 100px 24px;
      background: white;
    }
    .steps-grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 40px;
      max-width: 1000px;
      margin: 0 auto;
    }
    .step-card{ text-align:center; }
    .step-number{
      width: 60px; height: 60px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 50%;
      display:flex; align-items:center; justify-content:center;
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: 24px;
      color:white;
      margin: 0 auto 24px;
      box-shadow: 0 10px 24px rgba(99,102,241,.25);
    }
    .step-title{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: 20px;
      margin-bottom: 12px;
    }
    .step-desc{
      font-size: 15px;
      color: var(--gray);
      font-weight: 700;
      line-height: 1.7;
    }

    .testimonials{
      padding: 100px 24px;
      background: linear-gradient(135deg, #f8fafc 0%, #f0f9ff 100%);
    }
    .testimonials-grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .testimonial-card{
      background:white;
      border-radius: 20px;
      padding: 32px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(15,23,42,.06);
    }
    .testimonial-stars{ display:flex; gap: 4px; margin-bottom: 16px; }
    .testimonial-stars svg{ width:18px; height:18px; color: var(--accent); fill: var(--accent); }
    .testimonial-text{
      font-size: 15px;
      color: var(--dark);
      font-weight: 700;
      line-height: 1.7;
      margin-bottom: 20px;
    }
    .testimonial-author{ display:flex; align-items:center; gap: 12px; }
    .testimonial-avatar{
      width: 44px; height: 44px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display:flex; align-items:center; justify-content:center;
      color:white;
      font-weight: 900;
      font-size: 16px;
    }
    .testimonial-name{ font-weight: 900; font-size: 15px; }
    .testimonial-role{ font-size: 13px; color: var(--gray); font-weight: 700; }

    .cta{
      padding: 100px 24px;
      background: var(--dark);
      text-align:center;
    }
    .cta-title{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: clamp(36px, 5vw, 56px);
      color: white;
      margin-bottom: 20px;
      letter-spacing: -0.02em;
    }
    .cta-subtitle{
      font-size: 18px;
      color: rgba(255,255,255,0.7);
      margin-bottom: 40px;
      max-width: 560px;
      margin-left:auto; margin-right:auto;
      font-weight: 700;
    }

    footer{
      background: #020617;
      padding: 60px 24px 30px;
    }
    .footer-container{ max-width: 1200px; margin: 0 auto; }
    .footer-grid{
      display:grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 60px;
      margin-bottom: 50px;
    }
    .footer-brand p{
      color: rgba(255,255,255,0.6);
      font-size: 15px;
      margin-top: 16px;
      line-height: 1.7;
      font-weight: 700;
    }
    .footer-title{
      font-weight: 900;
      font-size: 14px;
      color: white;
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
    .footer-links{ list-style:none; }
    .footer-links li{ margin-bottom: 12px; }
    .footer-links a{
      color: rgba(255,255,255,0.6);
      text-decoration:none;
      font-size: 14px;
      transition: color .2s;
      font-weight: 700;
    }
    .footer-links a:hover{ color: white; }
    .footer-bottom{
      border-top: 1px solid rgba(255,255,255,0.1);
      padding-top: 30px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .footer-bottom p{
      color: rgba(255,255,255,0.5);
      font-size: 14px;
      font-weight: 700;
    }

    /* ===== BUILDER MODAL ===== */
    .builder-overlay{
      position: fixed;
      inset: 0;
      background: rgba(2,6,23,.60);
      z-index: 2000;
      display:none;
      padding: 18px;
      overflow:auto;
    }
    .builder-overlay.show{ display:block; }

    .builder-shell{
      max-width: 1400px;
      margin: 0 auto;
      background: #fff;
      border-radius: 20px;
      overflow:hidden;
      box-shadow: var(--shadow-xl);
      border: 1px solid rgba(255,255,255,.15);
    }

    .builder-topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 14px 16px;
      border-bottom: 1px solid var(--gray-light);
      background: rgba(255,255,255,0.90);
      position: sticky;
      top: 0;
      z-index: 5;
    }
    .builder-topbar .left{
      display:flex; align-items:center; gap: 12px; flex-wrap: wrap;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 7px 12px;
      border-radius: 999px;
      border: 1px solid var(--gray-light);
      background: var(--light);
      font-size: 12px;
      font-weight: 900;
      color: var(--gray);
    }
    .builder-actions{ display:flex; gap: 10px; flex-wrap: wrap; justify-content:flex-end; }

    .builder{
      display:grid;
      grid-template-columns: 360px 1fr;
      min-height: calc(100vh - 120px);
    }

    .sidebar{
      background:white;
      border-right: 1px solid var(--gray-light);
      padding: 16px;
      overflow:auto;
    }
    .sidebar h3{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--gray);
      margin: 18px 0 10px;
    }

    .form-group{ margin-bottom: 12px; }
    .form-group label{
      display:block;
      font-size: 12px;
      font-weight: 900;
      color: #334155;
      margin-bottom: 5px;
    }
    .form-group input,
    .form-group textarea,
    .form-group select{
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #d1d5db;
      border-radius: 12px;
      font-size: 14px;
      font-family: inherit;
      background: #fff;
    }
    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus{
      outline:none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(99,102,241,.15);
    }
    .form-group textarea{ resize: vertical; min-height: 80px; }

    .grid2{ display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .grid3{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }

    .card{
      border: 1px solid var(--gray-light);
      border-radius: 14px;
      padding: 12px;
      background: #fff;
      box-shadow: 0 1px 0 rgba(15,23,42,.02);
      margin-bottom: 12px;
    }
    .card-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .card-title{
      font-weight: 900;
      font-size: 12px;
      color: var(--dark);
    }
    .muted{
      font-size: 12px;
      color: var(--gray);
      font-weight: 800;
    }
    .row-actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .photo-row{ display:flex; align-items:center; gap: 12px; flex-wrap: wrap; }
    .photo-preview{
      width: 70px; height: 70px;
      border-radius: 16px;
      border: 1px solid var(--gray-light);
      background: #f8fafc;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      color: var(--gray);
      font-size: 12px;
      font-weight: 900;
    }
    .photo-preview img{ width:100%; height:100%; object-fit:cover; display:block; }

    .preview{
      padding: 22px;
      background: #eef2ff;
      overflow:auto;
      display:flex;
      justify-content:center;
    }

    /* ===== RESUME PAGE ===== */
    .resume-page{
      width: var(--a4w);
      min-height: var(--a4h);
      background: white;
      border-radius: 16px;
      box-shadow: var(--shadow-xl);
      border: 1px solid rgba(15,23,42,.08);
      overflow:hidden;
    }
    .resume-inner{ padding: 44px 54px; }

    /* colored section system (per template) */
    #resumePage{
      --sec-exp: linear-gradient(135deg, #6366f1, #06b6d4);
      --sec-skill: linear-gradient(135deg, #10b981, #06b6d4);
      --sec-edu: linear-gradient(135deg, #7c3aed, #6366f1);
      --sec-lang: linear-gradient(135deg, #f59e0b, #ef4444);
      --sec-hobby: linear-gradient(135deg, #f59e0b, #6366f1);
      --sec-sum: linear-gradient(135deg, #0f172a, #334155);
      --sec-custom: linear-gradient(135deg, #06b6d4, #6366f1);
      --sec-border: rgba(15,23,42,.10);
    }

    /* Header */
    .r-header{
      display:grid;
      grid-template-columns: 1fr auto;
      gap: 18px;
      align-items:center;
      padding-bottom: 16px;
      border-bottom: 2px solid #0f172a;
      margin-bottom: 18px;
    }
    .r-name{
      font-family: Montserrat, sans-serif;
      font-weight: 900;
      font-size: 30px;
      letter-spacing: -0.02em;
      line-height: 1.05;
    }
    .r-title{
      font-size: 15px;
      font-weight: 800;
      color: #64748b;
      margin-top: 4px;
    }
    .r-contact{
      display:flex;
      flex-wrap: wrap;
      gap: 8px 16px;
      font-size: 12.5px;
      color: #64748b;
      font-weight: 800;
      margin-top: 10px;
    }
    .r-contact span{ color: #64748b; }
    .r-photo{
      width: 70px; height: 70px;
      border-radius: 16px;
      border: 1px solid #e2e8f0;
      background: #f8fafc;
      overflow:hidden;
      display:none;
    }
    .r-photo img{ width:100%; height:100%; object-fit:cover; display:block; }

    .r-section{ margin-bottom: 18px; }

    /* NEW: Colored section headers */
    .r-sec-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid var(--sec-border);
      margin-bottom: 12px;
      background: #fff;
    }
    .r-sec-head .tag{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      font-size: 12px;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.10em;
      color: #0f172a;
    }
    .r-sec-head .tag i{
      width: 16px;
      height: 16px;
      border-radius: 6px;
      display:inline-block;
      background: var(--sec-sum);
      box-shadow: 0 8px 20px rgba(15,23,42,.15);
    }
    .r-sec-head[data-sec="summary"] .tag i{ background: var(--sec-sum); }
    .r-sec-head[data-sec="experience"] .tag i{ background: var(--sec-exp); }
    .r-sec-head[data-sec="education"] .tag i{ background: var(--sec-edu); }
    .r-sec-head[data-sec="skills"] .tag i{ background: var(--sec-skill); }
    .r-sec-head[data-sec="tools"] .tag i{ background: var(--sec-skill); }
    .r-sec-head[data-sec="languages"] .tag i{ background: var(--sec-lang); }
    .r-sec-head[data-sec="hobbies"] .tag i{ background: var(--sec-hobby); }
    .r-sec-head[data-sec="custom"] .tag i{ background: var(--sec-custom); }

    .r-item{ margin-bottom: 14px; }
    .r-item-head{
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      gap: 10px;
      margin-bottom: 4px;
    }
    .r-item-title{ font-weight: 900; font-size: 14.5px; }
    .r-item-date{
      font-size: 12.5px;
      color: #64748b;
      font-weight: 800;
      white-space:nowrap;
    }
    .r-item-sub{
      font-size: 13.2px;
      color: #64748b;
      font-weight: 800;
      margin-bottom: 6px;
    }
    .r-desc{
      font-size: 13.5px;
      color: #334155;
      font-weight: 650;
      line-height: 1.62;
      white-space: pre-wrap;
    }

    .chips{ display:flex; flex-wrap:wrap; gap: 8px; }
    .chip{
      padding: 6px 12px;
      border-radius: 10px;
      font-size: 12.5px;
      font-weight: 800;
      border: 1px solid rgba(15,23,42,.08);
      background: #f1f5f9;
      color: #334155;
    }
    /* color chips by section */
    .chips[data-sec="skills"] .chip{ background: rgba(16,185,129,.10); border-color: rgba(16,185,129,.18); }
    .chips[data-sec="tools"] .chip{ background: rgba(6,182,212,.10); border-color: rgba(6,182,212,.18); }
    .chips[data-sec="hobbies"] .chip{ background: rgba(245,158,11,.12); border-color: rgba(245,158,11,.20); }

    /* Bright experience badge */
    .exp-badge{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: var(--sec-exp);
      color: white !important;
      font-size: 11px;
      font-weight: 900;
      letter-spacing: normal;
      text-transform:none;
      white-space:nowrap;
      border: 1px solid rgba(255,255,255,.20);
      box-shadow: 0 12px 28px rgba(99,102,241,.22);
    }

    /* ===== TEMPLATE THEMES (10) ===== */
    /* Minimalist */
    #resumePage.tpl-minimalist{
      --sec-exp: linear-gradient(135deg, #0f172a, #334155);
      --sec-skill: linear-gradient(135deg, #0f172a, #334155);
      --sec-edu: linear-gradient(135deg, #0f172a, #334155);
      --sec-lang: linear-gradient(135deg, #0f172a, #334155);
      --sec-hobby: linear-gradient(135deg, #0f172a, #334155);
      --sec-custom: linear-gradient(135deg, #0f172a, #334155);
    }

    /* Modern */
    #resumePage.tpl-modern .resume-inner{ padding: 0; }
    #resumePage.tpl-modern .resume-layout{
      display:grid;
      grid-template-columns: 34% 66%;
      min-height: var(--a4h);
    }
    #resumePage.tpl-modern .left-rail{
      background: linear-gradient(180deg, #eef2ff 0%, #e0f2fe 100%);
      padding: 38px 24px;
      border-right: 1px solid rgba(15,23,42,.08);
    }
    #resumePage.tpl-modern .main-rail{ padding: 38px 40px; }
    #resumePage.tpl-modern .r-header{
      border-bottom: 1px solid rgba(15,23,42,.12);
      margin-bottom: 14px;
      padding-bottom: 14px;
      grid-template-columns: 1fr;
    }
    #resumePage.tpl-modern .r-photo{
      display:block;
      width: 84px;
      height: 84px;
      border-radius: 18px;
      margin: 0 auto 12px;
    }
    #resumePage.tpl-modern .r-name{ text-align:center; font-size: 28px; }
    #resumePage.tpl-modern .r-title{ text-align:center; }
    #resumePage.tpl-modern .r-contact{ justify-content:center; }

    /* Bold */
    #resumePage.tpl-bold{
      background: #0b1220;
    }
    #resumePage.tpl-bold .resume-inner,
    #resumePage.tpl-bold .resume-layout,
    #resumePage.tpl-bold .left-rail,
    #resumePage.tpl-bold .main-rail{
      background: #0b1220;
    }
    #resumePage.tpl-bold .resume-page,
    #resumePage.tpl-bold .resume-page *{
      color: #e5e7eb !important;
    }
    #resumePage.tpl-bold .r-header{ border-bottom: 2px solid rgba(99,102,241,.9); }
    #resumePage.tpl-bold .r-title,
    #resumePage.tpl-bold .r-contact span,
    #resumePage.tpl-bold .r-item-date,
    #resumePage.tpl-bold .r-item-sub,
    #resumePage.tpl-bold .r-desc{ color: rgba(229,231,235,.82) !important; }
    #resumePage.tpl-bold .r-sec-head{
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.12);
    }
    #resumePage.tpl-bold .r-sec-head .tag{ color: #e5e7eb; }
    #resumePage.tpl-bold .chip{ background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.12); color: #e5e7eb !important; }
    #resumePage.tpl-bold{ --sec-exp: linear-gradient(135deg, #6366f1, #06b6d4); --sec-skill: linear-gradient(135deg, #10b981, #06b6d4); --sec-edu: linear-gradient(135deg, #7c3aed, #6366f1); --sec-lang: linear-gradient(135deg, #f59e0b, #ef4444); --sec-hobby: linear-gradient(135deg, #f59e0b, #6366f1); --sec-custom: linear-gradient(135deg, #06b6d4, #6366f1); }

    /* Executive */
    #resumePage.tpl-executive .r-name{
      font-family: "Playfair Display", serif;
      font-weight: 700;
      letter-spacing: 0;
    }

    /* Creative */
    #resumePage.tpl-creative{ --sec-exp: linear-gradient(135deg, #f59e0b, #ef4444); --sec-skill: linear-gradient(135deg, #ef4444, #6366f1); --sec-edu: linear-gradient(135deg, #6366f1, #06b6d4); --sec-lang: linear-gradient(135deg, #f59e0b, #6366f1); --sec-hobby: linear-gradient(135deg, #f59e0b, #ef4444); --sec-custom: linear-gradient(135deg, #06b6d4, #ef4444); }

    /* Technical */
    #resumePage.tpl-technical .resume-page,
    #resumePage.tpl-technical .resume-page *{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace !important;
    }
    #resumePage.tpl-technical{ --sec-exp: linear-gradient(135deg, #06b6d4, #10b981); --sec-skill: linear-gradient(135deg, #06b6d4, #6366f1); --sec-edu: linear-gradient(135deg, #10b981, #06b6d4); --sec-lang: linear-gradient(135deg, #f59e0b, #10b981); --sec-hobby: linear-gradient(135deg, #f59e0b, #6366f1); --sec-custom: linear-gradient(135deg, #06b6d4, #10b981); }

    /* Academic */
    #resumePage.tpl-academic{ --sec-exp: linear-gradient(135deg, #7c3aed, #6366f1); --sec-skill: linear-gradient(135deg, #6366f1, #06b6d4); --sec-edu: linear-gradient(135deg, #7c3aed, #0f172a); --sec-lang: linear-gradient(135deg, #f59e0b, #7c3aed); --sec-hobby: linear-gradient(135deg, #f59e0b, #6366f1); --sec-custom: linear-gradient(135deg, #06b6d4, #7c3aed); }

    /* Compact */
    #resumePage.tpl-compact .resume-inner{ padding: 34px 44px; }
    #resumePage.tpl-compact .r-section{ margin-bottom: 14px; }
    #resumePage.tpl-compact .r-item{ margin-bottom: 10px; }
    #resumePage.tpl-compact .r-desc{ font-size: 13px; }
    #resumePage.tpl-compact .chip{ padding: 5px 10px; }

    /* Infographic */
    #resumePage.tpl-infographic{ --sec-exp: linear-gradient(135deg, #10b981, #06b6d4); --sec-skill: linear-gradient(135deg, #06b6d4, #6366f1); --sec-edu: linear-gradient(135deg, #10b981, #6366f1); --sec-lang: linear-gradient(135deg, #f59e0b, #10b981); --sec-hobby: linear-gradient(135deg, #f59e0b, #06b6d4); --sec-custom: linear-gradient(135deg, #10b981, #6366f1); }

    /* Simple */
    #resumePage.tpl-simple{
      --sec-exp: linear-gradient(135deg, #94a3b8, #64748b);
      --sec-skill: linear-gradient(135deg, #94a3b8, #64748b);
      --sec-edu: linear-gradient(135deg, #94a3b8, #64748b);
      --sec-lang: linear-gradient(135deg, #94a3b8, #64748b);
      --sec-hobby: linear-gradient(135deg, #94a3b8, #64748b);
      --sec-custom: linear-gradient(135deg, #94a3b8, #64748b);
    }

    /* Modern template rails */
    .resume-layout{ display:block; }
    .left-rail, .main-rail{ display:block; }

    /* ===== PRINT ===== */
    @media print{
      body{ background:white; }
      .navbar, .hero, .templates, .features, .how-it-works, .testimonials, .cta, footer{ display:none !important; }
      .builder-overlay{ display:block !important; position: static !important; background: white !important; padding: 0 !important; }
      .builder-shell{ box-shadow:none !important; border:none !important; border-radius:0 !important; }
      .builder-topbar, .sidebar{ display:none !important; }
      .builder{ grid-template-columns: 1fr !important; }
      .preview{ background: white !important; padding: 0 !important; }
      .resume-page{ box-shadow:none !important; border-radius:0 !important; border:none !important; }
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 1200px){
      .templates-grid{ grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 980px){
      .hero-container{ grid-template-columns: 1fr; text-align:center; }
      .hero-subtitle{ margin-left:auto; margin-right:auto; }
      .hero-buttons{ justify-content:center; }
      .hero-stats{ justify-content:center; }
      .hero-visual{ display:none; }
      .nav-links{ display:none; }
      .features-grid{ grid-template-columns: 1fr; }
      .steps-grid{ grid-template-columns: 1fr; }
      .testimonials-grid{ grid-template-columns: 1fr; }
      .footer-grid{ grid-template-columns: 1fr 1fr; }
      .builder{ grid-template-columns: 1fr; }
      .sidebar{ border-right: none; border-bottom: 1px solid var(--gray-light); }
      .preview{ padding: 14px; }
      .resume-page{ width: 100%; }
    }
    @media (max-width: 600px){
      .templates-grid{ grid-template-columns: 1fr; }
      .footer-grid{ grid-template-columns: 1fr; }
      .hero-buttons{ flex-direction: column; }
      .hero-stats{ flex-direction: column; gap: 18px; }
    }
  </style>

  <base target="_blank" />
</head>

<body>
  <!-- NAV -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="#" class="logo" onclick="window.scrollTo({top:0,behavior:'smooth'}); return false;">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
          </svg>
        </div>
        <span class="logo-text">ResumeForge</span>
      </a>

      <div class="nav-links">
        <a href="#templates" onclick="scrollToId('templates'); return false;">Templates</a>
        <a href="#features" onclick="scrollToId('features'); return false;">Features</a>
        <a href="#how-it-works" onclick="scrollToId('how-it-works'); return false;">How It Works</a>
        <a href="#testimonials" onclick="scrollToId('testimonials'); return false;">Reviews</a>
      </div>

      <a href="#templates" class="btn btn-primary" onclick="scrollToId('templates'); return false;">Get Started Free</a>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-container">
      <div class="hero-content">
        <div class="hero-badge">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          100% Free - No Signup Required
        </div>

        <h1 class="hero-title">Build a Professional Resume That <span>Gets You Hired</span></h1>
        <p class="hero-subtitle">Create an ATS-friendly resume in minutes. Choose from 10 professionally styled templates, customize, and export.</p>

        <div class="hero-buttons">
          <button class="btn btn-primary" onclick="scrollToId('templates')">Create My Resume</button>
          <button class="btn btn-outline" onclick="openImportDialogFromHome()">Import Resume</button>
        </div>

        <div class="hero-stats">
          <div class="stat">
            <span class="stat-number">50K+</span>
            <span class="stat-label">Resumes Created</span>
          </div>
          <div class="stat">
            <span class="stat-number">10</span>
            <span class="stat-label">Templates</span>
          </div>
          <div class="stat">
            <span class="stat-number">98%</span>
            <span class="stat-label">Success Rate</span>
          </div>
        </div>
      </div>

      <div class="hero-visual">
        <div class="resume-preview">
          <div class="preview-header">
            <div class="preview-name">JOHN ANDERSON</div>
            <div class="preview-title">Kitchen Assistant</div>
          </div>
          <div class="preview-section">
            <div class="preview-section-title">Experience</div>
            <div class="preview-line"></div>
            <div class="preview-line short"></div>
          </div>
          <div class="preview-section">
            <div class="preview-section-title">Education</div>
            <div class="preview-line"></div>
            <div class="preview-line short"></div>
          </div>
          <div class="preview-section">
            <div class="preview-section-title">Skills</div>
            <div class="preview-line"></div>
            <div class="preview-line short"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TEMPLATES -->
  <section id="templates" class="templates">
    <div class="section-header">
      <p class="section-label">Professional Templates</p>
      <h2 class="section-title">Choose Your Template</h2>
      <p class="section-subtitle">Each template includes: Create New CV + Import CV.</p>
    </div>

    <div class="templates-grid">
      <!-- Each template card: Create + Import -->
      <div class="template-card">
        <div class="template-preview-mini" onclick="openBuilderNew('tpl-minimalist','The Minimalist')">
          <div class="mini-resume">
            <div class="mini-header"><div class="mini-name">JOHN DOE</div></div>
            <div class="mini-line"></div><div class="mini-line short"></div>
            <div style="margin-top: 8px;"><div class="mini-line" style="width: 80%"></div><div class="mini-line" style="width: 60%"></div></div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Minimalist</h3>
          <p class="template-desc">Clean & elegant for most roles</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-minimalist','The Minimalist')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-minimalist','The Minimalist')">Import CV</button>
          </div>
        </div>
      </div>

      <div class="template-card">
        <div class="template-preview-mini" style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);" onclick="openBuilderNew('tpl-modern','The Modern')">
          <div class="mini-resume" style="display:grid; grid-template-columns: 1fr 2fr; gap: 8px; background: transparent; box-shadow:none;">
            <div style="background: rgba(255,255,255,0.9); border-radius: 8px; padding: 8px;"><div class="mini-line" style="background:#6366f1"></div></div>
            <div style="background: white; border-radius: 8px; padding: 8px;"><div class="mini-line"></div><div class="mini-line short"></div></div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Modern</h3>
          <p class="template-desc">Two-column, modern feel</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-modern','The Modern')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-modern','The Modern')">Import CV</button>
          </div>
        </div>
      </div>

      <div class="template-card">
        <div class="template-preview-mini" style="background:#0f172a;" onclick="openBuilderNew('tpl-bold','The Bold')">
          <div class="mini-resume" style="background: transparent; box-shadow:none; color:white;">
            <div style="text-align:center; border-bottom: 2px solid #6366f1; padding-bottom: 8px; margin-bottom: 8px;">
              <div style="font-size: 10px; font-weight: 900; letter-spacing: 0.1em;">NAME</div>
            </div>
            <div class="mini-line" style="background: rgba(255,255,255,.25)"></div>
            <div class="mini-line" style="background: rgba(255,255,255,.25); width:70%"></div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Bold</h3>
          <p class="template-desc">High contrast, creative edge</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-bold','The Bold')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-bold','The Bold')">Import CV</button>
          </div>
        </div>
      </div>

      <div class="template-card">
        <div class="template-preview-mini" onclick="openBuilderNew('tpl-executive','The Executive')">
          <div class="mini-resume" style="font-family:'Playfair Display', serif;">
            <div style="text-align:center; border-bottom:1px solid #0f172a; padding-bottom:6px;">
              <div style="font-size: 10px; font-weight: 800; color:#0f172a;">Executive</div>
            </div>
            <div style="margin-top:8px;"><div class="mini-line"></div><div class="mini-line" style="width:80%"></div></div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Executive</h3>
          <p class="template-desc">Sophisticated for senior roles</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-executive','The Executive')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-executive','The Executive')">Import CV</button>
          </div>
        </div>
      </div>

      <div class="template-card">
        <div class="template-preview-mini" style="background: linear-gradient(135deg, #f59e0b, #ef4444);" onclick="openBuilderNew('tpl-creative','The Creative')">
          <div class="mini-resume">
            <div style="display:flex; gap:8px;">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #f59e0b, #ef4444); border-radius: 50%;"></div>
              <div style="flex:1"><div class="mini-line"></div><div class="mini-line short"></div></div>
            </div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Creative</h3>
          <p class="template-desc">Warm accents for designers</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-creative','The Creative')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-creative','The Creative')">Import CV</button>
          </div>
        </div>
      </div>

      <div class="template-card">
        <div class="template-preview-mini" style="background:#1e293b;" onclick="openBuilderNew('tpl-technical','The Technical')">
          <div class="mini-resume" style="background:#0f172a; color:#06b6d4; font-family:monospace;">
            <div style="font-size: 8px; border-bottom: 1px solid #06b6d4; padding-bottom:4px;">&lt;developer&gt;</div>
            <div style="margin-top:8px;">
              <div class="mini-line" style="background:#06b6d4; opacity:.5"></div>
              <div class="mini-line" style="background:#06b6d4; opacity:.3; width:70%"></div>
            </div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Technical</h3>
          <p class="template-desc">Perfect for devs & engineers</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-technical','The Technical')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-technical','The Technical')">Import CV</button>
          </div>
        </div>
      </div>

      <div class="template-card">
        <div class="template-preview-mini" onclick="openBuilderNew('tpl-academic','The Academic')">
          <div class="mini-resume">
            <div style="text-align:center;">
              <div style="font-size: 9px; font-weight: 900; color:#7c3aed; letter-spacing:.08em;">CURRICULUM VITAE</div>
            </div>
            <div style="margin-top:8px; border-left: 2px solid #7c3aed; padding-left: 6px;">
              <div class="mini-line"></div><div class="mini-line short"></div>
            </div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Academic</h3>
          <p class="template-desc">CV style for academia</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-academic','The Academic')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-academic','The Academic')">Import CV</button>
          </div>
        </div>
      </div>

      <div class="template-card">
        <div class="template-preview-mini" onclick="openBuilderNew('tpl-compact','The Compact')">
          <div class="mini-resume" style="padding:8px;">
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 6px;">
              <div><div class="mini-line" style="height:4px;"></div><div class="mini-line" style="height:4px; width:80%"></div></div>
              <div><div class="mini-line" style="height:4px;"></div><div class="mini-line" style="height:4px; width:80%"></div></div>
            </div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Compact</h3>
          <p class="template-desc">Fit more into one page</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-compact','The Compact')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-compact','The Compact')">Import CV</button>
          </div>
        </div>
      </div>

      <div class="template-card">
        <div class="template-preview-mini" style="background: linear-gradient(135deg, #10b981, #06b6d4);" onclick="openBuilderNew('tpl-infographic','The Infographic')">
          <div class="mini-resume">
            <div style="display:flex; gap:6px; margin-bottom:6px;">
              <div style="width: 16px; height: 16px; background:#10b981; border-radius: 6px;"></div>
              <div style="width: 16px; height: 16px; background:#06b6d4; border-radius: 6px;"></div>
              <div style="width: 16px; height: 16px; background:#f59e0b; border-radius: 6px;"></div>
            </div>
            <div class="mini-line"></div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Infographic</h3>
          <p class="template-desc">Colorful, still ATS-clean</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-infographic','The Infographic')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-infographic','The Infographic')">Import CV</button>
          </div>
        </div>
      </div>

      <div class="template-card">
        <div class="template-preview-mini" onclick="openBuilderNew('tpl-simple','The Simple')">
          <div class="mini-resume" style="border: 2px solid #e2e8f0;">
            <div style="text-align:center;">
              <div style="font-size: 10px; font-weight: 800; color:#334155;">Simple & Clean</div>
            </div>
            <div style="margin-top:8px;">
              <div class="mini-line" style="background:#cbd5e1"></div>
              <div class="mini-line" style="background:#cbd5e1; width:75%"></div>
            </div>
          </div>
        </div>
        <div class="template-info">
          <h3 class="template-name">The Simple</h3>
          <p class="template-desc">Ultra straightforward format</p>
          <div class="template-actions">
            <button class="primary" type="button" onclick="openBuilderNew('tpl-simple','The Simple')">Create New</button>
            <button type="button" onclick="openBuilderImport('tpl-simple','The Simple')">Import CV</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section id="features" class="features">
    <div class="section-header">
      <p class="section-label">Why Choose Us</p>
      <h2 class="section-title">Everything You Need to Get Hired</h2>
    </div>

    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <h3 class="feature-title">ATS-Friendly Format</h3>
        <p class="feature-desc">Clean layout and readable structure, made to survive recruiter systems and human eyes.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
            <path d="M2 17l10 5 10-5"></path>
            <path d="M2 12l10 5 10-5"></path>
          </svg>
        </div>
        <h3 class="feature-title">Create or Import</h3>
        <p class="feature-desc">Start fresh or import a saved ResumeForge JSON. No account, no drama.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
        </div>
        <h3 class="feature-title">Export Options</h3>
        <p class="feature-desc">PDF (print), HTML download, JSON export/import. DOCX needs a library or backend.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="3" y1="9" x2="21" y2="9"></line>
            <line x1="9" y1="21" x2="9" y2="9"></line>
          </svg>
        </div>
        <h3 class="feature-title">Colored Sections</h3>
        <p class="feature-desc">Experience, Skills, Education, Languages, etc. get template-based color accents.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
          </svg>
        </div>
        <h3 class="feature-title">Privacy Protected</h3>
        <p class="feature-desc">Saved locally in your browser. We do not store your data anywhere.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="2" y1="12" x2="22" y2="12"></line>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
          </svg>
        </div>
        <h3 class="feature-title">Mobile Friendly</h3>
        <p class="feature-desc">Works on phones, tablets, and desktops without falling apart.</p>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how-it-works" class="how-it-works">
    <div class="section-header">
      <p class="section-label">Simple Process</p>
      <h2 class="section-title">Build Your Resume in 3 Steps</h2>
    </div>

    <div class="steps-grid">
      <div class="step-card">
        <div class="step-number">1</div>
        <h3 class="step-title">Choose a Template</h3>
        <p class="step-desc">Pick a style. Yes, you can change it later.</p>
      </div>
      <div class="step-card">
        <div class="step-number">2</div>
        <h3 class="step-title">Create or Import</h3>
        <p class="step-desc">Start new, or import your saved ResumeForge JSON.</p>
      </div>
      <div class="step-card">
        <div class="step-number">3</div>
        <h3 class="step-title">Export</h3>
        <p class="step-desc">PDF (print), HTML, or JSON. DOCX needs a library or backend.</p>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="cta">
    <h2 class="cta-title">Ready to Build?</h2>
    <p class="cta-subtitle">Pick a template, fill your details, export what you need. No signup. No drama.</p>
    <button class="btn btn-primary" onclick="scrollToId('templates')">Choose Template</button>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="footer-container">
      <div class="footer-grid">
        <div class="footer-brand">
          <a href="#" class="logo" onclick="window.scrollTo({top:0,behavior:'smooth'}); return false;">
            <div class="logo-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
              </svg>
            </div>
            <span class="logo-text" style="color:white;">ResumeForge</span>
          </a>
          <p>Free, professional resume builder. Create ATS-friendly resumes in minutes. No signup required.</p>
        </div>

        <div>
          <h4 class="footer-title">Product</h4>
          <ul class="footer-links">
            <li><a href="#templates" onclick="scrollToId('templates'); return false;">Templates</a></li>
            <li><a href="#features" onclick="scrollToId('features'); return false;">Features</a></li>
            <li><a href="#how-it-works" onclick="scrollToId('how-it-works'); return false;">How It Works</a></li>
            <li><a href="#templates" onclick="scrollToId('templates'); return false;">Build Now</a></li>
          </ul>
        </div>

        <div>
          <h4 class="footer-title">Company</h4>
          <ul class="footer-links">
            <li><a href="#" onclick="return false;">About Us</a></li>
            <li><a href="#" onclick="return false;">Contact</a></li>
            <li><a href="#" onclick="return false;">Privacy Policy</a></li>
            <li><a href="#" onclick="return false;">Terms of Service</a></li>
          </ul>
        </div>

        <div>
          <h4 class="footer-title">Support</h4>
          <ul class="footer-links">
            <li><a href="#" onclick="return false;">Help Center</a></li>
            <li><a href="#" onclick="return false;">FAQ</a></li>
            <li><a href="#" onclick="return false;">Contact Us</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2025 ResumeForge. All rights reserved.</p>
        <p>Made with care for job seekers everywhere.</p>
      </div>
    </div>
  </footer>

  <!-- ===== BUILDER OVERLAY ===== -->
  <div class="builder-overlay" id="builderOverlay" aria-hidden="true">
    <div class="builder-shell">
      <div class="builder-topbar">
        <div class="left">
          <a href="#" class="logo" onclick="closeBuilder(); return false;">
            <div class="logo-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
              </svg>
            </div>
            <span class="logo-text">ResumeForge</span>
          </a>
          <span class="pill" id="tplPill">Template: The Minimalist</span>
          <span class="pill">Saved locally</span>
        </div>

        <div class="builder-actions">
          <button class="btn btn-outline btn-small" type="button" onclick="exportPDF()">Export PDF</button>
          <button class="btn btn-ghost btn-small" type="button" onclick="exportHTML()">Export HTML</button>
          <button class="btn btn-ghost btn-small" type="button" onclick="exportJSON()">Export JSON</button>
          <button class="btn btn-ghost btn-small" type="button" onclick="importJSONClick()">Import JSON</button>
          <button class="btn btn-ghost btn-small" type="button" onclick="exportDOCXInfo()">Export DOCX</button>
          <button class="btn btn-danger btn-small" type="button" onclick="resetBuilder()">Reset CV</button>
          <button class="btn btn-primary btn-small" type="button" onclick="closeBuilder()">Close</button>
        </div>
      </div>

      <div class="builder">
        <!-- LEFT: EDITOR -->
        <aside class="sidebar">
          <h3>Personal</h3>

          <div class="grid2">
            <div class="form-group">
              <label>Full Name</label>
              <input id="i_name" type="text" placeholder="Your name">
            </div>
            <div class="form-group">
              <label>Job Title</label>
              <input id="i_title" type="text" placeholder="Your role">
            </div>
          </div>

          <div class="grid2">
            <div class="form-group">
              <label>Email</label>
              <input id="i_email" type="text" placeholder="email@example.com">
            </div>
            <div class="form-group">
              <label>Phone</label>
              <input id="i_phone" type="text" placeholder="+44 ...">
            </div>
          </div>

          <div class="grid2">
            <div class="form-group">
              <label>Location</label>
              <input id="i_location" type="text" placeholder="City, Country">
            </div>
            <div class="form-group">
              <label>Website / LinkedIn</label>
              <input id="i_website" type="text" placeholder="linkedin.com/in/...">
            </div>
          </div>

          <div class="form-group">
            <label>Date of Birth</label>
            <input id="i_dob" type="date">
          </div>

          <div class="form-group">
            <label>Profile Photo</label>
            <div class="photo-row">
              <div class="photo-preview" id="photoBox">Photo</div>
              <div style="flex:1">
                <input id="i_photo" type="file" accept="image/png,image/jpeg">
                <div class="row-actions">
                  <button class="btn btn-danger btn-small" type="button" onclick="removePhoto()">Remove</button>
                </div>
              </div>
            </div>
          </div>

          <h3>Summary</h3>
          <div class="form-group">
            <textarea id="i_summary" rows="4" placeholder="24 lines: role, strengths, impact, keywords"></textarea>
          </div>

          <h3>Experience</h3>
          <div class="row-actions">
            <button class="btn btn-outline btn-small" type="button" onclick="addExperience()">+ Add Experience</button>
          </div>
          <div id="expList" style="margin-top:10px;"></div>

          <h3>Education</h3>
          <div class="row-actions">
            <button class="btn btn-outline btn-small" type="button" onclick="addEducation()">+ Add Education</button>
          </div>
          <div id="eduList" style="margin-top:10px;"></div>

          <h3>Skills</h3>
          <div class="form-group">
            <label>Skills (comma separated)</label>
            <input id="i_skills" type="text" placeholder="Food prep, Hygiene, Teamwork">
          </div>
          <div class="form-group">
            <label>Tools / Tech (comma separated)</label>
            <input id="i_tools" type="text" placeholder="POS, Inventory, Kitchen equipment">
          </div>

          <h3>Languages</h3>
          <div class="row-actions">
            <button class="btn btn-outline btn-small" type="button" onclick="addLanguage()">+ Add Language</button>
          </div>
          <div id="langList" style="margin-top:10px;"></div>

          <h3>Hobbies</h3>
          <div class="form-group">
            <label>Hobbies (comma separated)</label>
            <input id="i_hobbies" type="text" placeholder="Cooking, Fitness, Volunteering">
          </div>

          <h3>Extra Sections</h3>
          <div class="row-actions">
            <button class="btn btn-outline btn-small" type="button" onclick="addCustomSection()">+ Add Extra Section</button>
          </div>
          <div id="customList" style="margin-top:10px;"></div>
        </aside>

        <!-- RIGHT: PREVIEW -->
        <main class="preview">
          <div class="resume-page" id="resumePage">
            <div class="resume-inner" id="resumeInner">
              <div class="resume-layout" id="resumeLayout">
                <div class="left-rail" id="leftRail" style="display:none;"></div>
                <div class="main-rail" id="mainRail" style="display:none;"></div>
                <div id="resumeContent"></div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
  </div>

  <!-- Hidden file input for import -->
  <input id="importFile" type="file" accept="application/json" style="display:none;" />

  <script>
    /* ============
       Helpers
    ============ */
    function scrollToId(id){
      const el = document.getElementById(id);
      if(!el) return;
      const y = el.getBoundingClientRect().top + window.pageYOffset - 90;
      window.scrollTo({ top: y, behavior: "smooth" });
    }
    function esc(s){
      return String(s ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
    function splitList(s){
      return (s || "")
        .split(/[,;\n]/g)
        .map(x => x.trim())
        .filter(Boolean)
        .slice(0, 60);
    }
    function uid(){
      return Math.random().toString(16).slice(2) + Date.now().toString(16);
    }

    /* ============
       State + LocalStorage
    ============ */
    const LS_KEY = "resumeforge_single_html_builder_v2";

    const state = {
      templateClass: "tpl-minimalist",
      templateName: "The Minimalist",
      personal: {
        name: "",
        title: "",
        email: "",
        phone: "",
        location: "",
        website: "",
        dob: "",
        photoDataUrl: ""
      },
      summary: "",
      experience: [],
      education: [],
      skills: "",
      tools: "",
      languages: [],
      hobbies: "",
      customSections: []
    };

    function save(){ localStorage.setItem(LS_KEY, JSON.stringify(state)); }
    function load(){
      const raw = localStorage.getItem(LS_KEY);
      if(!raw) return;
      try{
        const parsed = JSON.parse(raw);
        Object.assign(state, parsed);
        state.personal = Object.assign(state.personal, parsed.personal || {});
        state.experience = Array.isArray(parsed.experience) ? parsed.experience : [];
        state.education = Array.isArray(parsed.education) ? parsed.education : [];
        state.languages = Array.isArray(parsed.languages) ? parsed.languages : [];
        state.customSections = Array.isArray(parsed.customSections) ? parsed.customSections : [];
      }catch{}
    }

    /* ============
       Create New / Import flow
    ============ */
    function openBuilderNew(templateClass, templateName){
      // New CV means reset fields but keep chosen template
      state.templateClass = templateClass;
      state.templateName = templateName;
      state.personal = { name:"", title:"", email:"", phone:"", location:"", website:"", dob:"", photoDataUrl:"" };
      state.summary = "";
      state.experience = [];
      state.education = [];
      state.skills = "";
      state.tools = "";
      state.languages = [];
      state.hobbies = "";
      state.customSections = [];
      save();
      openBuilder(templateClass, templateName);
    }

    function openBuilderImport(templateClass, templateName){
      // Choose template, then import JSON into it
      state.templateClass = templateClass;
      state.templateName = templateName;
      save();
      openBuilder(templateClass, templateName);
      importJSONClick();
    }

    function openImportDialogFromHome(){
      // Import from home will load into last used template
      openBuilder(state.templateClass, state.templateName);
      importJSONClick();
    }

    /* ============
       Builder open/close + template selection
    ============ */
    function openBuilder(templateClass, templateName){
      state.templateClass = templateClass || state.templateClass || "tpl-minimalist";
      state.templateName = templateName || state.templateName || "The Minimalist";
      save();

      const overlay = document.getElementById("builderOverlay");
      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden","false");

      document.getElementById("tplPill").textContent = `Template: ${state.templateName}`;

      hydrateInputs();
      applyTemplate();
      ensureDefaults();
      renderAllEditors();
      updatePreview();
    }

    function closeBuilder(){
      const overlay = document.getElementById("builderOverlay");
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden","true");
    }

    function applyTemplate(){
      const page = document.getElementById("resumePage");
      page.className = "resume-page";
      page.classList.add(state.templateClass);
      document.getElementById("tplPill").textContent = `Template: ${state.templateName}`;
      save();
      updatePreview();
    }

    function resetBuilder(){
      if(!confirm("This clears your resume data saved on this device. Continue?")) return;
      localStorage.removeItem(LS_KEY);
      location.reload();
    }

    /* ============
       Experience years calculator (auto)
    ============ */
    function parseMonthValue(v){
      const s = (v||"").trim();
      if(!/^\d{4}-\d{2}$/.test(s)) return null;
      const [y,m] = s.split("-").map(Number);
      if(!y || !m) return null;
      return { y, m };
    }
    function monthIndex(ym){ return ym.y * 12 + (ym.m - 1); }

    function totalExpMonths(){
      let total = 0;
      const now = new Date();
      const nowYM = { y: now.getFullYear(), m: now.getMonth() + 1 };
      for(const e of state.experience){
        const start = parseMonthValue(e.start);
        if(!start) continue;
        let endYM = null;
        if(e.endMode === "Present"){ endYM = nowYM; }
        else { endYM = parseMonthValue(e.end) || start; }
        const diff = Math.max(0, monthIndex(endYM) - monthIndex(start) + 1);
        total += diff;
      }
      return total;
    }
    function fmtYears(months){
      const yrs = months / 12;
      const rounded = Math.round(yrs * 10) / 10;
      return `${rounded.toFixed(1)} yrs`;
    }
    function fmtDOB(iso){
      if(!iso) return "";
      if(!/^\d{4}-\d{2}-\d{2}$/.test(iso)) return "";
      const [y,m,d] = iso.split("-");
      return `DOB: ${d}/${m}/${y}`;
    }

    /* ============
       Editor renderers
    ============ */
    function renderAllEditors(){
      renderExperienceEditor();
      renderEducationEditor();
      renderLanguageEditor();
      renderCustomEditor();
    }

    function renderExperienceEditor(){
      const root = document.getElementById("expList");
      root.innerHTML = "";
      state.experience.forEach((e, idx) => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <div class="card-head">
            <div>
              <div class="card-title">Experience #${idx+1}</div>
              <div class="muted">Use dates for auto total experience.</div>
            </div>
            <button class="btn btn-danger btn-small" type="button" data-remove>Remove</button>
          </div>

          <div class="grid2">
            <div class="form-group">
              <label>Job Title</label>
              <input type="text" data-k="job" placeholder="e.g., Kitchen Assistant" value="${esc(e.job)}">
            </div>
            <div class="form-group">
              <label>Company</label>
              <input type="text" data-k="company" placeholder="e.g., Restaurant Name" value="${esc(e.company)}">
            </div>
          </div>

          <div class="grid3">
            <div class="form-group">
              <label>Start (YYYY-MM)</label>
              <input type="month" data-k="start" value="${esc(e.start)}">
            </div>
            <div class="form-group">
              <label>End Type</label>
              <select data-k="endMode">
                <option value="Present" ${e.endMode==="Present" ? "selected":""}>Present</option>
                <option value="End" ${e.endMode==="End" ? "selected":""}>End date</option>
              </select>
            </div>
            <div class="form-group">
              <label>End (YYYY-MM)</label>
              <input type="month" data-k="end" value="${esc(e.end)}">
            </div>
          </div>

          <div class="form-group">
            <label>Description (bullets or paragraph)</label>
            <textarea rows="4" data-k="desc" placeholder="- Assisted with food preparation...\n- Maintained hygiene standards...">${esc(e.desc)}</textarea>
          </div>
        `;

        card.querySelector("[data-remove]").addEventListener("click", () => {
          state.experience.splice(idx,1);
          save();
          renderExperienceEditor();
          updatePreview();
        });

        card.querySelectorAll("[data-k]").forEach(inp => {
          const k = inp.getAttribute("data-k");
          const handler = () => {
            e[k] = inp.value;
            save();
            updatePreview();
          };
          inp.addEventListener("input", handler);
          inp.addEventListener("change", handler);
        });

        root.appendChild(card);
      });
    }

    function renderEducationEditor(){
      const root = document.getElementById("eduList");
      root.innerHTML = "";
      state.education.forEach((ed, idx) => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <div class="card-head">
            <div>
              <div class="card-title">Education #${idx+1}</div>
              <div class="muted">Degree, school, year, notes.</div>
            </div>
            <button class="btn btn-danger btn-small" type="button" data-remove>Remove</button>
          </div>

          <div class="grid2">
            <div class="form-group">
              <label>Degree / Course</label>
              <input type="text" data-k="degree" placeholder="e.g., Food Hygiene Level 2" value="${esc(ed.degree)}">
            </div>
            <div class="form-group">
              <label>Institution</label>
              <input type="text" data-k="school" placeholder="e.g., College / Training Center" value="${esc(ed.school)}">
            </div>
          </div>

          <div class="grid2">
            <div class="form-group">
              <label>Year</label>
              <input type="text" data-k="year" placeholder="e.g., 2025" value="${esc(ed.year)}">
            </div>
            <div class="form-group">
              <label>Notes (optional)</label>
              <input type="text" data-k="notes" placeholder="e.g., Pass" value="${esc(ed.notes)}">
            </div>
          </div>
        `;

        card.querySelector("[data-remove]").addEventListener("click", () => {
          state.education.splice(idx,1);
          save();
          renderEducationEditor();
          updatePreview();
        });

        card.querySelectorAll("[data-k]").forEach(inp => {
          const k = inp.getAttribute("data-k");
          inp.addEventListener("input", () => {
            ed[k] = inp.value;
            save();
            updatePreview();
          });
        });

        root.appendChild(card);
      });
    }

    function renderLanguageEditor(){
      const root = document.getElementById("langList");
      root.innerHTML = "";
      state.languages.forEach((l, idx) => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <div class="card-head">
            <div>
              <div class="card-title">Language #${idx+1}</div>
              <div class="muted">Example: English (Native).</div>
            </div>
            <button class="btn btn-danger btn-small" type="button" data-remove>Remove</button>
          </div>

          <div class="grid2">
            <div class="form-group">
              <label>Language</label>
              <input type="text" data-k="name" placeholder="e.g., English" value="${esc(l.name)}">
            </div>
            <div class="form-group">
              <label>Level</label>
              <select data-k="level">
                <option ${l.level==="Native" ? "selected":""}>Native</option>
                <option ${l.level==="Fluent" ? "selected":""}>Fluent</option>
                <option ${l.level==="Professional" ? "selected":""}>Professional</option>
                <option ${l.level==="Intermediate" ? "selected":""}>Intermediate</option>
                <option ${l.level==="Basic" ? "selected":""}>Basic</option>
              </select>
            </div>
          </div>
        `;

        card.querySelector("[data-remove]").addEventListener("click", () => {
          state.languages.splice(idx,1);
          save();
          renderLanguageEditor();
          updatePreview();
        });

        card.querySelectorAll("[data-k]").forEach(inp => {
          const k = inp.getAttribute("data-k");
          const handler = () => {
            l[k] = inp.value;
            save();
            updatePreview();
          };
          inp.addEventListener("input", handler);
          inp.addEventListener("change", handler);
        });

        root.appendChild(card);
      });
    }

    function renderCustomEditor(){
      const root = document.getElementById("customList");
      root.innerHTML = "";
      state.customSections.forEach((s, idx) => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <div class="card-head">
            <div>
              <div class="card-title">Extra Section #${idx+1}</div>
              <div class="muted">Awards, Projects, Volunteering, etc.</div>
            </div>
            <button class="btn btn-danger btn-small" type="button" data-remove>Remove</button>
          </div>

          <div class="form-group">
            <label>Section Title</label>
            <input type="text" data-k="title" placeholder="e.g., Certifications" value="${esc(s.title)}">
          </div>

          <div class="form-group">
            <label>Content (one bullet per line)</label>
            <textarea rows="4" data-k="content" placeholder="- Item\n- Item\n- Item">${esc(s.content)}</textarea>
          </div>
        `;

        card.querySelector("[data-remove]").addEventListener("click", () => {
          state.customSections.splice(idx,1);
          save();
          renderCustomEditor();
          updatePreview();
        });

        card.querySelectorAll("[data-k]").forEach(inp => {
          const k = inp.getAttribute("data-k");
          inp.addEventListener("input", () => {
            s[k] = inp.value;
            save();
            updatePreview();
          });
        });

        root.appendChild(card);
      });
    }

    /* ============
       Add item actions
    ============ */
    function addExperience(){
      state.experience.push({ id: uid(), job:"", company:"", start:"", endMode:"Present", end:"", desc:"" });
      save();
      renderExperienceEditor();
      updatePreview();
    }
    function addEducation(){
      state.education.push({ id: uid(), degree:"", school:"", year:"", notes:"" });
      save();
      renderEducationEditor();
      updatePreview();
    }
    function addLanguage(){
      state.languages.push({ id: uid(), name:"", level:"Fluent" });
      save();
      renderLanguageEditor();
      updatePreview();
    }
    function addCustomSection(){
      state.customSections.push({ id: uid(), title:"", content:"" });
      save();
      renderCustomEditor();
      updatePreview();
    }
    function ensureDefaults(){
      if(!state.experience.length) addExperience();
      if(!state.education.length) addEducation();
      if(!state.languages.length) addLanguage();
    }

    /* ============
       Photo
    ============ */
    const photoInput = () => document.getElementById("i_photo");
    function removePhoto(){
      state.personal.photoDataUrl = "";
      const input = photoInput();
      if(input) input.value = "";
      save();
      updatePreview();
      const box = document.getElementById("photoBox");
      if(box) box.innerHTML = "Photo";
    }

    function bindPhoto(){
      const input = photoInput();
      if(!input) return;
      input.addEventListener("change", () => {
        const file = input.files && input.files[0];
        if(!file) return;
        if(!/image\/(png|jpeg)/.test(file.type)){
          alert("Upload JPG or PNG only.");
          input.value = "";
          return;
        }
        const reader = new FileReader();
        reader.onload = () => {
          state.personal.photoDataUrl = reader.result;
          save();
          updatePreview();
        };
        reader.readAsDataURL(file);
      });
    }

    /* ============
       Bind input fields
    ============ */
    function bindText(id, getter, setter){
      const el = document.getElementById(id);
      if(!el) return;
      el.oninput = () => { setter(el.value); save(); updatePreview(); };
      el.onchange = () => { setter(el.value); save(); updatePreview(); };
      el.value = getter() || "";
    }

    function hydrateInputs(){
      bindText("i_name", () => state.personal.name, v => state.personal.name = v);
      bindText("i_title", () => state.personal.title, v => state.personal.title = v);
      bindText("i_email", () => state.personal.email, v => state.personal.email = v);
      bindText("i_phone", () => state.personal.phone, v => state.personal.phone = v);
      bindText("i_location", () => state.personal.location, v => state.personal.location = v);
      bindText("i_website", () => state.personal.website, v => state.personal.website = v);
      bindText("i_dob", () => state.personal.dob, v => state.personal.dob = v);

      const sum = document.getElementById("i_summary");
      if(sum){
        sum.value = state.summary || "";
        sum.oninput = () => { state.summary = sum.value; save(); updatePreview(); };
      }

      const skills = document.getElementById("i_skills");
      if(skills){
        skills.value = state.skills || "";
        skills.oninput = () => { state.skills = skills.value; save(); updatePreview(); };
      }

      const tools = document.getElementById("i_tools");
      if(tools){
        tools.value = state.tools || "";
        tools.oninput = () => { state.tools = tools.value; save(); updatePreview(); };
      }

      const hobbies = document.getElementById("i_hobbies");
      if(hobbies){
        hobbies.value = state.hobbies || "";
        hobbies.oninput = () => { state.hobbies = hobbies.value; save(); updatePreview(); };
      }

      const box = document.getElementById("photoBox");
      if(box){
        box.innerHTML = state.personal.photoDataUrl ? `<img alt="Photo" src="${state.personal.photoDataUrl}">` : "Photo";
      }

      bindPhoto();
      document.getElementById("tplPill").textContent = `Template: ${state.templateName}`;
    }

    /* ============
       Preview rendering
    ============ */
    function renderSectionHead(title, secKey, rightHTML=""){
      return `
        <div class="r-sec-head" data-sec="${secKey}">
          <span class="tag"><i></i><span>${esc(title)}</span></span>
          ${rightHTML}
        </div>
      `;
    }

    function renderHeaderHTML(){
      const p = state.personal;
      const dob = fmtDOB(p.dob);

      const photoHTML = p.photoDataUrl
        ? `<div class="r-photo" style="display:block;"><img alt="Profile photo" src="${p.photoDataUrl}"></div>`
        : `<div class="r-photo" style="display:none;"></div>`;

      const contactBits = [
        p.email ? `<span>${esc(p.email)}</span>` : "",
        p.phone ? `<span>${esc(p.phone)}</span>` : "",
        p.location ? `<span>${esc(p.location)}</span>` : "",
        p.website ? `<span>${esc(p.website)}</span>` : "",
        dob ? `<span>${esc(dob)}</span>` : ""
      ].filter(Boolean).join("");

      return `
        <div class="r-header">
          <div>
            <div class="r-name">${esc(p.name || "Your Name")}</div>
            <div class="r-title">${esc(p.title || "Professional Title")}</div>
            <div class="r-contact">${contactBits || `<span style="color:#94a3b8;">email  phone  location  link</span>`}</div>
          </div>
          ${photoHTML}
        </div>
      `;
    }

    function renderSummaryHTML(){
      const text = (state.summary || "").trim();
      if(!text) return "";
      return `
        <div class="r-section">
          ${renderSectionHead("Professional Summary","summary")}
          <div class="r-desc">${esc(text)}</div>
        </div>
      `;
    }

    function renderExperienceHTML(){
      const items = state.experience.filter(e => (e.job||e.company||e.desc||e.start||e.end));
      if(!items.length) return "";

      const months = totalExpMonths();
      const badge = `<span class="exp-badge">Total Experience: ${fmtYears(months)}</span>`;

      const list = items.map(e => {
        const endLabel = (e.endMode === "Present") ? "Present" : (e.end || "");
        const dur = [e.start, endLabel].filter(Boolean).join(" - ");
        return `
          <div class="r-item">
            <div class="r-item-head">
              <div class="r-item-title">${esc(e.job || "Role")}</div>
              <div class="r-item-date">${esc(dur)}</div>
            </div>
            <div class="r-item-sub">${esc(e.company || "")}</div>
            <div class="r-desc">${esc(e.desc || "")}</div>
          </div>
        `;
      }).join("");

      return `
        <div class="r-section">
          ${renderSectionHead("Experience","experience", badge)}
          ${list}
        </div>
      `;
    }

    function renderEducationHTML(){
      const items = state.education.filter(ed => (ed.degree||ed.school||ed.year||ed.notes));
      if(!items.length) return "";

      const list = items.map(ed => `
        <div class="r-item">
          <div class="r-item-head">
            <div class="r-item-title">${esc(ed.degree || "Degree")}</div>
            <div class="r-item-date">${esc(ed.year || "")}</div>
          </div>
          <div class="r-item-sub">${esc(ed.school || "")}</div>
          ${ed.notes ? `<div class="r-desc">${esc(ed.notes)}</div>` : ``}
        </div>
      `).join("");

      return `
        <div class="r-section">
          ${renderSectionHead("Education","education")}
          ${list}
        </div>
      `;
    }

    function renderSkillsHTML(){
      const skills = splitList(state.skills);
      const tools = splitList(state.tools);
      let out = "";
      if(skills.length){
        out += `
          <div class="r-section">
            ${renderSectionHead("Skills","skills")}
            <div class="chips" data-sec="skills">${skills.map(s => `<span class="chip">${esc(s)}</span>`).join("")}</div>
          </div>
        `;
      }
      if(tools.length){
        out += `
          <div class="r-section">
            ${renderSectionHead("Tools","tools")}
            <div class="chips" data-sec="tools">${tools.map(s => `<span class="chip">${esc(s)}</span>`).join("")}</div>
          </div>
        `;
      }
      return out;
    }

    function renderLanguagesHTML(){
      const langs = state.languages.filter(l => (l.name||"").trim());
      if(!langs.length) return "";

      const list = langs.map(l => `
        <div class="r-item">
          <div class="r-item-head">
            <div class="r-item-title">${esc(l.name)}</div>
            <div class="r-item-date">${esc(l.level || "")}</div>
          </div>
        </div>
      `).join("");

      return `
        <div class="r-section">
          ${renderSectionHead("Languages","languages")}
          ${list}
        </div>
      `;
    }

    function renderHobbiesHTML(){
      const hobbies = splitList(state.hobbies);
      if(!hobbies.length) return "";
      return `
        <div class="r-section">
          ${renderSectionHead("Hobbies","hobbies")}
          <div class="chips" data-sec="hobbies">${hobbies.map(h => `<span class="chip">${esc(h)}</span>`).join("")}</div>
        </div>
      `;
    }

    function renderCustomHTML(){
      const valid = state.customSections.filter(s => (s.title||"").trim() && (s.content||"").trim());
      if(!valid.length) return "";

      return valid.map(s => {
        const bullets = (s.content || "")
          .split("\n")
          .map(x => x.replace(/^\s*[-]\s*/,"").trim())
          .filter(Boolean)
          .slice(0, 12);

        const body = bullets.length
          ? " " + bullets.map(esc).join("\n ")
          : esc(s.content || "");

        return `
          <div class="r-section">
            ${renderSectionHead(s.title,"custom")}
            <div class="r-desc">${body}</div>
          </div>
        `;
      }).join("");
    }

    function updatePreview(){
      const resumeContent = document.getElementById("resumeContent");
      const page = document.getElementById("resumePage");
      const isModern = page.classList.contains("tpl-modern");
      const leftRail = document.getElementById("leftRail");
      const mainRail = document.getElementById("mainRail");

      const header = renderHeaderHTML();
      const summary = renderSummaryHTML();
      const exp = renderExperienceHTML();
      const edu = renderEducationHTML();
      const skills = renderSkillsHTML();
      const lang = renderLanguagesHTML();
      const hobbies = renderHobbiesHTML();
      const custom = renderCustomHTML();

      if(isModern){
        leftRail.style.display = "block";
        mainRail.style.display = "block";
        resumeContent.innerHTML = "";
        mainRail.innerHTML = `${header}${summary}${exp}${custom}${edu}`;
        leftRail.innerHTML = `${skills}${lang}${hobbies}`;
      } else {
        leftRail.style.display = "none";
        mainRail.style.display = "none";
        resumeContent.innerHTML = `${header}${summary}${exp}${custom}${edu}${skills}${lang}${hobbies}`;
      }

      const box = document.getElementById("photoBox");
      if(box){
        box.innerHTML = state.personal.photoDataUrl ? `<img alt="Photo" src="${state.personal.photoDataUrl}">` : "Photo";
      }
    }

    /* ============
       Export / Import
    ============ */
    function downloadFile(filename, content, mime){
      const blob = new Blob([content], { type: mime });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(() => URL.revokeObjectURL(url), 500);
    }

    function exportPDF(){
      // Browser "Print to PDF" is the only reliable pure-frontend PDF export without adding libs.
      window.print();
    }

    function exportHTML(){
      const html = document.getElementById("resumePage").outerHTML;
      const doc = `<!DOCTYPE html><html><head><meta charset="utf-8"><title>Resume</title></head><body style="margin:0;">${html}</body></html>`;
      downloadFile("resume.html", doc, "text/html;charset=utf-8");
    }

    function exportJSON(){
      const data = JSON.stringify(state, null, 2);
      downloadFile("resume.json", data, "application/json");
    }

    function importJSONClick(){
      document.getElementById("importFile").click();
    }

    document.getElementById("importFile").addEventListener("change", (e) => {
      const file = e.target.files && e.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = () => {
        try{
          const parsed = JSON.parse(reader.result);
          // minimal validation
          if(!parsed || typeof parsed !== "object") throw new Error("Invalid JSON");
          // keep chosen template, but import resume content
          const tplClass = state.templateClass;
          const tplName = state.templateName;

          Object.assign(state, parsed);
          state.templateClass = tplClass;
          state.templateName = tplName;

          state.personal = Object.assign({ name:"", title:"", email:"", phone:"", location:"", website:"", dob:"", photoDataUrl:"" }, state.personal || {});
          state.experience = Array.isArray(state.experience) ? state.experience : [];
          state.education = Array.isArray(state.education) ? state.education : [];
          state.languages = Array.isArray(state.languages) ? state.languages : [];
          state.customSections = Array.isArray(state.customSections) ? state.customSections : [];

          save();
          hydrateInputs();
          renderAllEditors();
          applyTemplate();
          updatePreview();
          alert("Imported successfully.");
        }catch(err){
          alert("Import failed. Make sure it's a ResumeForge JSON export.");
        }finally{
          e.target.value = "";
        }
      };
      reader.readAsText(file);
    });

    function exportDOCXInfo(){
      alert(
        "DOCX export cannot be done reliably with plain HTML/JS alone.\n\n" +
        "Options:\n" +
        "1) Add a client-side library (docx / docxtemplater)\n" +
        "2) Use a backend service to generate DOCX\n\n" +
        "If you want, I can provide a single-HTML version that uses a CDN docx library."
      );
    }

    /* ============
       Init
    ============ */
    load();

    // expose functions
    window.openBuilder = openBuilder;
    window.closeBuilder = closeBuilder;
    window.addExperience = addExperience;
    window.addEducation = addEducation;
    window.addLanguage = addLanguage;
    window.addCustomSection = addCustomSection;
    window.removePhoto = removePhoto;
    window.scrollToId = scrollToId;
    window.resetBuilder = resetBuilder;

    window.openBuilderNew = openBuilderNew;
    window.openBuilderImport = openBuilderImport;
    window.openImportDialogFromHome = openImportDialogFromHome;

    window.exportPDF = exportPDF;
    window.exportHTML = exportHTML;
    window.exportJSON = exportJSON;
    window.importJSONClick = importJSONClick;
    window.exportDOCXInfo = exportDOCXInfo;

    // Optional: open builder if URL has ?builder=1
    (function(){
      const params = new URLSearchParams(location.search);
      if(params.get("builder") === "1"){
        openBuilder(state.templateClass, state.templateName);
      }
    })();
  </script>
</body>
</html>
